<div class="dialog-container">
  <div class="dialog-header">
    <h2 mat-dialog-title>{{ isEdit ? 'Edit Deal' : 'Create New Deal' }}</h2>
    <button mat-icon-button (click)="cancel()" class="close-button">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <mat-dialog-content>
    <form [formGroup]="form" (ngSubmit)="submit()" class="deal-form">
      
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Client Name</mat-label>
          <input matInput formControlName="clientName" placeholder="Enter client name">
          <mat-icon matPrefix>business</mat-icon>
        </mat-form-field>
      </div>

      <div class="form-row two-col">
        <mat-form-field appearance="outline">
          <mat-label>Sector</mat-label>
          <mat-select formControlName="sector">
            <mat-option *ngFor="let sector of sectors" [value]="sector">
              {{ sector }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>category</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Deal Type</mat-label>
          <mat-select formControlName="dealType">
            <mat-option *ngFor="let type of dealTypes" [value]="type">
              {{ type }}
            </mat-option>
          </mat-select>
          <mat-icon matPrefix>assignment</mat-icon>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Summary</mat-label>
          <textarea 
            matInput 
            formControlName="summary" 
            rows="4"
            placeholder="Brief description of the deal..."
          ></textarea>
          <mat-icon matPrefix>description</mat-icon>
        </mat-form-field>
      </div>

      <div class="form-row" *ngIf="isAdmin">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Deal Value (USD)</mat-label>
          <input matInput type="number" formControlName="dealValue" placeholder="Enter deal value">
          <mat-icon matPrefix>attach_money</mat-icon>
        </mat-form-field>
      </div>

    </form>
  </mat-dialog-content>

  <mat-dialog-actions>
    <button mat-stroked-button (click)="cancel()" type="button">
      Cancel
    </button>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="submit()"
      [disabled]="form.invalid"
      class="submit-button"
    >
      <mat-icon>{{ isEdit ? 'save' : 'add' }}</mat-icon>
      {{ isEdit ? 'Update Deal' : 'Create Deal' }}
    </button>
  </mat-dialog-actions>
</div>